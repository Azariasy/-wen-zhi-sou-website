# 文智搜系统托盘功能

## 功能概述

文智搜现在支持系统托盘功能，让您可以在后台运行应用程序，随时快速访问。主要功能包括：

1. **最小化到托盘** - 关闭窗口时可以选择最小化到系统托盘而不是退出应用
2. **托盘菜单** - 提供快速访问常用功能的菜单
3. **最近搜索** - 通过托盘菜单快速访问最近的搜索记录
4. **启动时最小化** - 可以设置启动时直接最小化到托盘

## 使用方法

### 启动带托盘功能的文智搜

有两种方式启动带托盘功能的文智搜：

1. **普通启动**：
   ```
   python start_with_tray.py
   ```

2. **最小化启动**（直接最小化到托盘）：
   ```
   python start_with_tray.py --minimized
   ```

### 托盘操作

- **单击托盘图标**：显示/隐藏主窗口
- **右键托盘图标**：显示托盘菜单，包含以下选项：
  - 显示主窗口
  - 隐藏主窗口
  - 最近搜索（子菜单）
  - 退出

### 托盘设置

通过主窗口的"设置"菜单中的"托盘设置"选项可以配置托盘行为：

1. **基本设置**
   - 关闭窗口时最小化到托盘而不是退出
   - 启动时最小化到托盘
   - 单击托盘图标的行为

2. **通知设置**
   - 显示托盘提示消息
   - 索引完成时显示通知
   - 搜索完成时显示通知

## 文件说明

托盘功能相关的主要文件：

- `start_with_tray.py` - 启动带托盘功能的文智搜
- `main_tray.py` - 托盘功能的主入口
- `main_window_tray.py` - 支持托盘的主窗口类
- `tray_app.py` - 托盘图标和菜单实现
- `tray_settings.py` - 托盘设置对话框

## 测试脚本

- `test_simple_tray.py` - 简单托盘功能测试
- `test_full_tray.py` - 完整托盘功能测试

## 注意事项

1. 托盘功能需要图形界面环境支持，在无GUI的服务器环境中无法使用
2. 在某些Linux发行版中，可能需要安装额外的系统托盘支持包
3. 托盘图标使用应用程序图标，确保`app_icon.ico`或`app_icon.png`文件存在 